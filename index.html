<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="Easily view today's SMCS blocking schedule for PHS 10th Grade.">
    <title>PHS 10th Grade SMCS Blocking Schedule</title>

    <link href="https://fonts.googleapis.com/css?family=Inclusive+Sans" rel="stylesheet" type="text/css">

    <link rel="stylesheet" media="(min-width: 800px)" href="style.css" />
    <link rel="stylesheet" media="(max-width: 800px), handheld" href="compact.css" />

    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="manifest" href="manifest.json"/>

    <meta name="theme-color" content="#647784"/>
  </head>
  <body>
    <main>
      <div id="content">
        <h1 id="title">PHS 10th Grade SMCS Blocking Schedule</h1>

        <div class="schedule_div">
          <p id="header">Today's Schedule (__/__/__)</p>
          <p id="extra_info">
            <a href="https://tinyurl.com/9thsmcs2027" id="two_weeks">View Raw Spreadsheet</a>
            <br>
            <a href="https://defygg.github.io/poolesvilleschedule/" id="phs_tracker">View PHS Period Schedule</a>
            <br id="credits_br" style="display: none;">
            (c. Daniel Mathew)
          </p>
          
          <table class="schedule_table">
            <tr>
              <th class="table_period table_top" class="table_period" id="table_period">Period</th>
              <th class="table_blockA table_top" id="bl1">Block _</th>
              <th class="table_blockB table_top" id="bl2">Block _</th>
            </tr>

            <tr>
              <td class="table_period">5</td>
              <td class="table_blockA" id="a5">Loading...</td>
              <td class="table_blockB" id="b5">Loading...</td>
            </tr>
            <tr>
              <td class="table_period">6</td>
              <td class="table_blockA" id="a6">Loading...</td>
              <td class="table_blockB" id="b6">Loading...</td>
            </tr>
            <tr>
              <td class="table_period table_bottom">7</td>
              <td class="table_blockA table_bottom" id="a7">Loading...</td>
              <td class="table_blockB table_bottom" id="b7">Loading...</td>
            </tr>
          </table>

          <p id="footer">Notes: ___________</p>
          <p id="madeby">Made by <a href="https://smartynotchy.github.io">Pilliam W</a></p>

          </div>
        </div>
      </div>

      <hr>
      <br>

      <div id="week1content">
        <!-- Monday Week 1 -->
        <div class="schedule_div">
          <p id="0date">__/__/__</p>
          <table class="schedule_table">
            <tr>
              <th class="table_period table_top" class="table_period">P</th>
              <th class="table_blockA table_top" id="0bl1">_</th>
              <th class="table_blockB table_top" id="0bl2">_</th>
            </tr>

            <tr>
              <td class="table_period">5</td>
              <td class="table_blockA" id="0a5">...</td>
              <td class="table_blockB" id="0b5">...</td>
            </tr>
            <tr>
              <td class="table_period">6</td>
              <td class="table_blockA" id="0a6">...</td>
              <td class="table_blockB" id="0b6">...</td>
            </tr>
            <tr>
              <td class="table_period table_bottom">7</td>
              <td class="table_blockA table_bottom" id="0a7">...</td>
              <td class="table_blockB table_bottom" id="0b7">...</td>
            </tr>
          </table>

          <p id="0footer">___________</p>
        </div>

        <!-- Tuesday Week 1 -->
        <div class="schedule_div">
          <p id="1date">__/__/__</p>
          <table class="schedule_table">
            <tr>
              <th class="table_period table_top" class="table_period">P</th>
              <th class="table_blockA table_top" id="1bl1">_</th>
              <th class="table_blockB table_top" id="1bl2">_</th>
            </tr>

            <tr>
              <td class="table_period">5</td>
              <td class="table_blockA" id="1a5">...</td>
              <td class="table_blockB" id="1b5">...</td>
            </tr>
            <tr>
              <td class="table_period">6</td>
              <td class="table_blockA" id="1a6">...</td>
              <td class="table_blockB" id="1b6">...</td>
            </tr>
            <tr>
              <td class="table_period table_bottom">7</td>
              <td class="table_blockA table_bottom" id="1a7">...</td>
              <td class="table_blockB table_bottom" id="1b7">...</td>
            </tr>
          </table>

          <p id="1footer">___________</p>
        </div>

        <!-- Wednesday Week 1 -->
        <div class="schedule_div">
          <p id="2date">__/__/__</p>
          <table class="schedule_table">
            <tr>
              <th class="table_period table_top" class="table_period">P</th>
              <th class="table_blockA table_top" id="2bl1">_</th>
              <th class="table_blockB table_top" id="2bl2">_</th>
            </tr>

            <tr>
              <td class="table_period">5</td>
              <td class="table_blockA" id="2a5">...</td>
              <td class="table_blockB" id="2b5">...</td>
            </tr>
            <tr>
              <td class="table_period">6</td>
              <td class="table_blockA" id="2a6">...</td>
              <td class="table_blockB" id="2b6">...</td>
            </tr>
            <tr>
              <td class="table_period table_bottom">7</td>
              <td class="table_blockA table_bottom" id="2a7">...</td>
              <td class="table_blockB table_bottom" id="2b7">...</td>
            </tr>
          </table>

          <p id="2footer">___________</p>
        </div>

        <!-- Thursday Week 1 -->
        <div class="schedule_div">
          <p id="3date">__/__/__</p>
          <table class="schedule_table">
            <tr>
              <th class="table_period table_top" class="table_period">P</th>
              <th class="table_blockA table_top" id="3bl1">_</th>
              <th class="table_blockB table_top" id="3bl2">_</th>
            </tr>

            <tr>
              <td class="table_period">5</td>
              <td class="table_blockA" id="3a5">...</td>
              <td class="table_blockB" id="3b5">...</td>
            </tr>
            <tr>
              <td class="table_period">6</td>
              <td class="table_blockA" id="3a6">...</td>
              <td class="table_blockB" id="3b6">...</td>
            </tr>
            <tr>
              <td class="table_period table_bottom">7</td>
              <td class="table_blockA table_bottom" id="3a7">...</td>
              <td class="table_blockB table_bottom" id="3b7">...</td>
            </tr>
          </table>

          <p id="3footer">___________</p>
        </div>

        <!-- Friday Week 1 -->
        <div class="schedule_div">
          <p id="4date">__/__/__</p>
          <table class="schedule_table">
            <tr>
              <th class="table_period table_top" class="table_period">P</th>
              <th class="table_blockA table_top" id="4bl1">_</th>
              <th class="table_blockB table_top" id="4bl2">_</th>
            </tr>

            <tr>
              <td class="table_period">5</td>
              <td class="table_blockA" id="4a5">...</td>
              <td class="table_blockB" id="4b5">...</td>
            </tr>
            <tr>
              <td class="table_period">6</td>
              <td class="table_blockA" id="4a6">...</td>
              <td class="table_blockB" id="4b6">...</td>
            </tr>
            <tr>
              <td class="table_period table_bottom">7</td>
              <td class="table_blockA table_bottom" id="4a7">...</td>
              <td class="table_blockB table_bottom" id="4b7">...</td>
            </tr>
          </table>

          <p id="4footer">___________</p>
        </div>
      </div>

      <br id="week_schedule_br1" style="display: none;">
      <br id="week_schedule_br2" style="display: none;">

      <div id="week2content">
        <!-- Monday Week 2 -->
        <div class="schedule_div">
          <p id="5date">__/__/__</p>
          <table class="schedule_table">
            <tr>
              <th class="table_period table_top" class="table_period">P</th>
              <th class="table_blockA table_top" id="5bl1">_</th>
              <th class="table_blockB table_top" id="5bl2">_</th>
            </tr>

            <tr>
              <td class="table_period">5</td>
              <td class="table_blockA" id="5a5">...</td>
              <td class="table_blockB" id="5b5">...</td>
            </tr>
            <tr>
              <td class="table_period">6</td>
              <td class="table_blockA" id="5a6">...</td>
              <td class="table_blockB" id="5b6">...</td>
            </tr>
            <tr>
              <td class="table_period table_bottom">7</td>
              <td class="table_blockA table_bottom" id="5a7">...</td>
              <td class="table_blockB table_bottom" id="5b7">...</td>
            </tr>
          </table>

          <p id="5footer">___________</p>
        </div>

        <!-- Tuesday Week 2 -->
        <div class="schedule_div">
          <p id="6date">__/__/__</p>
          <table class="schedule_table">
            <tr>
              <th class="table_period table_top" class="table_period">P</th>
              <th class="table_blockA table_top" id="6bl1">_</th>
              <th class="table_blockB table_top" id="6bl2">_</th>
            </tr>

            <tr>
              <td class="table_period">5</td>
              <td class="table_blockA" id="6a5">...</td>
              <td class="table_blockB" id="6b5">...</td>
            </tr>
            <tr>
              <td class="table_period">6</td>
              <td class="table_blockA" id="6a6">...</td>
              <td class="table_blockB" id="6b6">...</td>
            </tr>
            <tr>
              <td class="table_period table_bottom">7</td>
              <td class="table_blockA table_bottom" id="6a7">...</td>
              <td class="table_blockB table_bottom" id="6b7">...</td>
            </tr>
          </table>

          <p id="6footer">___________</p>
        </div>

        <!-- Wednesday Week 2 -->
        <div class="schedule_div">
          <p id="7date">__/__/__</p>
          <table class="schedule_table">
            <tr>
              <th class="table_period table_top" class="table_period">P</th>
              <th class="table_blockA table_top" id="7bl1">_</th>
              <th class="table_blockB table_top" id="7bl2">_</th>
            </tr>

            <tr>
              <td class="table_period">5</td>
              <td class="table_blockA" id="7a5">...</td>
              <td class="table_blockB" id="7b5">...</td>
            </tr>
            <tr>
              <td class="table_period">6</td>
              <td class="table_blockA" id="7a6">...</td>
              <td class="table_blockB" id="7b6">...</td>
            </tr>
            <tr>
              <td class="table_period table_bottom">7</td>
              <td class="table_blockA table_bottom" id="7a7">...</td>
              <td class="table_blockB table_bottom" id="7b7">...</td>
            </tr>
          </table>

          <p id="7footer">___________</p>
        </div>

        <!-- Thursday Week 2 -->
        <div class="schedule_div">
          <p id="8date">__/__/__</p>
          <table class="schedule_table">
            <tr>
              <th class="table_period table_top" class="table_period">P</th>
              <th class="table_blockA table_top" id="8bl1">_</th>
              <th class="table_blockB table_top" id="8bl2">_</th>
            </tr>

            <tr>
              <td class="table_period">5</td>
              <td class="table_blockA" id="8a5">...</td>
              <td class="table_blockB" id="8b5">...</td>
            </tr>
            <tr>
              <td class="table_period">6</td>
              <td class="table_blockA" id="8a6">...</td>
              <td class="table_blockB" id="8b6">...</td>
            </tr>
            <tr>
              <td class="table_period table_bottom">7</td>
              <td class="table_blockA table_bottom" id="8a7">...</td>
              <td class="table_blockB table_bottom" id="8b7">...</td>
            </tr>
          </table>

          <p id="8footer">___________</p>
        </div>

        <!-- Friday Week 2 -->
        <div class="schedule_div">
          <p id="9date">__/__/__</p>
          <table class="schedule_table">
            <tr>
              <th class="table_period table_top" class="table_period">P</th>
              <th class="table_blockA table_top" id="9bl1">_</th>
              <th class="table_blockB table_top" id="9bl2">_</th>
            </tr>

            <tr>
              <td class="table_period">5</td>
              <td class="table_blockA" id="9a5">...</td>
              <td class="table_blockB" id="9b5">...</td>
            </tr>
            <tr>
              <td class="table_period">6</td>
              <td class="table_blockA" id="9a6">...</td>
              <td class="table_blockB" id="9b6">...</td>
            </tr>
            <tr>
              <td class="table_period table_bottom">7</td>
              <td class="table_blockA table_bottom" id="9a7">...</td>
              <td class="table_blockB table_bottom" id="9b7">...</td>
            </tr>
          </table>

          <p id="9footer">___________</p>
        </div>
      </div>
      <br>
      <br>
    </main>

    <script>
      var isMobile = navigator.userAgent.match(/Mobile/i) != null;
      if (isMobile) {
        document.getElementById("title").innerHTML = "9th SMCS Blocking Schedule";
        document.getElementById("table_period").innerHTML = "P";
        document.getElementById("two_weeks").innerHTML = "View Raw Data";
        document.getElementById("phs_tracker").innerHTML = "PHS Tracker";
        document.getElementById("credits_br").style = "display: block;";
        document.getElementById("week_schedule_br1").style = "display: block;";
        document.getElementById("week_schedule_br2").style = "display: block;";
      }

      // Fetch Schedule Data
      fetch("https://smartynotchy.pythonanywhere.com/")
        .then((response) => response.json())
        .then((json) => updateSchedule(json.body));

      function formatDate(date) {
        return `${date.getMonth()+1}/${date.getDate()}/${date.getFullYear()}`;
      }

      function updateSchedule(schedule) {
        console.log(schedule);
        document.getElementById("a5").innerHTML = schedule[0][0][0];
        document.getElementById("b5").innerHTML = schedule[0][0][1];
        document.getElementById("a6").innerHTML = schedule[0][1][0];
        document.getElementById("b6").innerHTML = schedule[0][1][1];
        document.getElementById("a7").innerHTML = schedule[0][2][0];
        document.getElementById("b7").innerHTML = schedule[0][2][1];
        document.getElementById("bl1").innerHTML = "Block " + schedule[0][3][1];
        document.getElementById("bl2").innerHTML = "Block " + schedule[0][3][2];

        if (schedule[0][3][0] != "" && schedule[0][3][0] != undefined) {
          document.getElementById("footer").innerHTML = "Notes: " + schedule[0][3][0];
        } else {
          document.getElementById("footer").innerHTML = "No Extra Notes";
        }

        let date = new Date();
        let weekday = date.getDay();
        if (weekday == 0 || weekday == 6) {
          date.setDate(date.getDate() + 1);
          if (weekday == 6) {
            date.setDate(date.getDate() + 1);
          }
          document.getElementById("header").innerHTML = `Next Monday's Schedule (${formatDate(date)})`
        } else {
          document.getElementById("header").innerHTML = `Today's Schedule (${formatDate(date)})`
        }

        // Find the Monday
        let monday = new Date();
        weekday = monday.getDay();
        if (weekday == 0 || weekday == 6) {
          // weekends
          monday.setDate(monday.getDate() + 1);
          if (weekday == 6) {
            monday.setDate(monday.getDate() + 1);
          }
        } else {
          monday.setDate(monday.getDate() - weekday + 1)
        }

        for (let i = 0; i < 5; i++) {
          if (isMobile) {
            document.getElementById(`${i}date`).innerHTML = formatDate(monday) + " (This Week " + monday.toLocaleDateString("en-US", { weekday: 'long' }) + ")";
          } else {
            document.getElementById(`${i}date`).innerHTML = formatDate(monday);
          }
          document.getElementById(`${i}a5`).innerHTML = schedule[i+1][0][0];
          document.getElementById(`${i}b5`).innerHTML = schedule[i+1][0][1];
          document.getElementById(`${i}a6`).innerHTML = schedule[i+1][1][0];
          document.getElementById(`${i}b6`).innerHTML = schedule[i+1][1][1];
          document.getElementById(`${i}a7`).innerHTML = schedule[i+1][2][0];
          document.getElementById(`${i}b7`).innerHTML = schedule[i+1][2][1];
          document.getElementById(`${i}bl1`).innerHTML = schedule[i+1][3][1];
          document.getElementById(`${i}bl2`).innerHTML = schedule[i+1][3][2];
          monday.setDate(monday.getDate() + 1);

          if (schedule[i+1][3][0] != "" && schedule[i+1][3][0] != undefined) {
            document.getElementById(`${i}footer`).innerHTML = schedule[i+1][3][0];
          } else {
            document.getElementById(`${i}footer`).innerHTML = "No Extra Notes";
          }
        }

        monday.setDate(monday.getDate() + 2);

        for (let i = 5; i < 10; i++) {
          if (isMobile) {
            document.getElementById(`${i}date`).innerHTML = formatDate(monday) + " (Next Week " + monday.toLocaleDateString("en-US", { weekday: 'long' }) + ")";
          } else {
            document.getElementById(`${i}date`).innerHTML = formatDate(monday);
          }
          document.getElementById(`${i}a5`).innerHTML = schedule[i+1][0][0];
          document.getElementById(`${i}b5`).innerHTML = schedule[i+1][0][1];
          document.getElementById(`${i}a6`).innerHTML = schedule[i+1][1][0];
          document.getElementById(`${i}b6`).innerHTML = schedule[i+1][1][1];
          document.getElementById(`${i}a7`).innerHTML = schedule[i+1][2][0];
          document.getElementById(`${i}b7`).innerHTML = schedule[i+1][2][1];
          document.getElementById(`${i}bl1`).innerHTML = schedule[i+1][3][1];
          document.getElementById(`${i}bl2`).innerHTML = schedule[i+1][3][2];
          monday.setDate(monday.getDate() + 1);

          if (schedule[i+1][3][0] != "" && schedule[i+1][3][0] != undefined) {
            document.getElementById(`${i}footer`).innerHTML = schedule[i+1][3][0];
          } else {
            document.getElementById(`${i}footer`).innerHTML = "No Extra Notes";
          }
        }
      }

      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("serviceworker.js").then(
          (registration) => {
            console.log("Service worker registration successful:", registration);
          },
          (error) => {
            console.error(`Service worker registration failed: ${error}`);
          },
        );
      } else {
        console.error("Service workers are not supported.");
      }


      
    </script>
  </body>
</html>
